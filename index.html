<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no" />
    <title>The Voyage | by MayBorg.</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" sizes="32x32" href="https://img.icons8.com/?size=100&id=wh2djijxoGnG&format=png&color=000000">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Orbitron:wght@400;900&family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <style>
        /* --- DESIGN SYSTEM --- */
        :root {
            --neon-pink: #ff00ff;
            --neon-cyan: #00f3ff;
            --neon-purple: #9d00ff;
            --neon-orange: #ff8c00;
            --void-bg: #0d0221;
            --grid-color: rgba(0, 243, 255, 0.2);
            --crt-opacity: 0.15;
        }

        /* --- CORE STYLES --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        body {
            background-color: var(--void-bg);
            color: #fff;
            font-family: 'Space Mono', monospace;
            overflow-x: hidden;
            height: auto;
            scrollbar-width: none; 
            font-size: clamp(14px, 2vw, 18px); /* Responsive base font */
        }

        body::-webkit-scrollbar { display: none; }

        h1 { 
            font-family: 'Orbitron', sans-serif; 
            text-transform: uppercase;
            letter-spacing: clamp(2px, 1vw, 5px);
            filter: drop-shadow(0 0 10px var(--neon-cyan));
            font-size: clamp(2.5rem, 10vw, 5rem); /* Responsive Heading */
            line-height: 1.1;
        }

        h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            letter-spacing: 3px;
        }

        /* --- THE SYNTHWAVE SUN --- */
        .synth-sun {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: clamp(200px, 60vw, 400px); /* Responsive Sun */
            height: clamp(200px, 60vw, 400px);
            background: linear-gradient(to bottom, #ff8c00 0%, #ff00ff 100%);
            border-radius: 50%;
            z-index: 1;
            box-shadow: 0 0 80px #ff00ff;
            mask-image: linear-gradient(to bottom, 
                black 0%, black 50%, 
                transparent 52%, black 54%, 
                transparent 58%, black 62%, 
                transparent 68%, black 75%, 
                transparent 85%, black 100%
            );
        }

        /* --- CRT EFFECTS --- */
        .crt-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.2) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.05), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.05));
            background-size: 100% 4px, 3px 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .crt-flicker {
            animation: flicker 0.15s infinite;
            position: fixed;
            inset: 0;
            background: rgba(255, 255, 255, 0.01);
            z-index: 9998;
            pointer-events: none;
        }

        @keyframes flicker {
            0% { opacity: 0.1; }
            50% { opacity: 0.2; }
            100% { opacity: 0.1; }
        }

        /* --- THE GRID --- */
        .perspective-box {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            perspective: 800px;
            z-index: 2;
            pointer-events: none;
        }

        .retro-grid {
            position: absolute;
            bottom: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background-image: 
                linear-gradient(to right, var(--grid-color) 1px, transparent 1px),
                linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px);
            background-size: clamp(40px, 8vw, 80px) clamp(40px, 8vw, 80px);
            transform: rotateX(60deg);
            mask-image: linear-gradient(to top, black 30%, transparent 70%);
        }

        /* --- HUD ELEMENTS --- */
        .hud-main {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            pointer-events: none;
            gap: 10px;
        }

        .hud-panel {
            border: 1px solid var(--neon-cyan);
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 12px;
            backdrop-filter: blur(8px);
            box-shadow: inset 0 0 10px var(--neon-cyan);
            font-size: clamp(8px, 2vw, 11px);
            max-width: 45%;
        }

        .sync-bar-container {
            width: clamp(80px, 20vw, 150px);
            height: 6px;
            background: #111;
            border: 1px solid var(--neon-pink);
            margin-top: 5px;
        }

        .sync-bar-fill {
            height: 100%;
            width: 0%;
            background: var(--neon-pink);
            box-shadow: 0 0 10px var(--neon-pink);
            transition: width 0.3s;
        }

        /* --- CHAPTER CARDS --- */
        .section-trigger {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10vh 5vw;
            position: relative;
            z-index: 10;
        }

        .card-retro {
            background: rgba(13, 2, 33, 0.85);
            border: 2px solid var(--neon-purple);
            padding: clamp(1.5rem, 5vw, 3rem);
            max-width: 800px;
            width: 100%;
            text-align: center;
            position: relative;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
            box-sizing: border-box;
        }

        .card-retro::before {
            content: "";
            position: absolute;
            top: -2px; left: -2px; right: -2px; bottom: -2px;
            background: linear-gradient(45deg, var(--neon-pink), var(--neon-cyan));
            z-index: -1;
            filter: blur(10px);
            opacity: 0.3;
        }

        .card-retro:hover {
            transform: scale(1.01);
            border-color: var(--neon-cyan);
        }

        /* --- GAMIFIED OBJECTS --- */
        .floating-node {
            position: absolute;
            width: 20px; height: 20px;
            background: var(--neon-cyan);
            box-shadow: 0 0 15px var(--neon-cyan);
            border-radius: 50%;
            cursor: pointer;
        }

        .glitch-text-anim {
            animation: text-glitch 2s infinite;
        }

        @keyframes text-glitch {
            0% { transform: translate(0); }
            10% { transform: translate(-2px, -2px); text-shadow: 2px 0 red; }
            20% { transform: translate(2px, 2px); text-shadow: -2px 0 blue; }
            30% { transform: translate(0); }
        }

        /* --- FINAL SEQUENCE --- */
        #final-overlay {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 99999;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            padding: 20px;
        }

        .letter-content {
            font-size: clamp(0.9rem, 3vw, 1.2rem);
            line-height: 1.6;
            max-width: 600px;
            width: 90%;
            padding: clamp(20px, 5vw, 40px);
            border: 1px solid var(--neon-pink);
            background: rgba(255, 0, 255, 0.05);
            text-align: center;
            box-shadow: 0 0 30px rgba(255, 0, 255, 0.2);
        }

        /* --- HELPER CLASSES --- */
        .hidden-node { opacity: 0; transform: translateY(30px); }
        .pink-glow { color: var(--neon-pink); text-shadow: 0 0 10px var(--neon-pink); }
        .cyan-glow { color: var(--neon-cyan); text-shadow: 0 0 10px var(--neon-cyan); }
        
        @media (max-width: 640px) {
            .hud-main { top: 5px; left: 5px; right: 5px; }
            .hud-panel { padding: 5px 8px; }
        }
    </style>
</head>
<body>

    <div class="crt-overlay"></div>
    <div class="crt-flicker"></div>
    <div class="synth-sun"></div>
    <div class="perspective-box">
        <div class="retro-grid" id="floor-grid"></div>
    </div>

    <header class="hud-main">
        <div class="hud-panel">
            <div>SIGNAL: <span class="pink-glow">X-77</span></div>
            <div>STATUS: <span id="sync-status">OFFLINE</span></div>
            <div class="sync-bar-container">
                <div class="sync-bar-fill" id="sync-fill"></div>
            </div>
        </div>
        <div class="hud-panel text-right">
            <div class="text-lg md:text-xl cyan-glow" id="distance-display">9999KM</div>
            <div id="target-id" class="opacity-50 text-[7px] uppercase">LOCATING...</div>
        </div>
    </header>

    <main id="main-scroller">
        
        <section class="section-trigger" id="s1">
            <div class="card-retro">
                <h1 class="glitch-text-anim mb-4">THE VOID</h1>
                <p class="mb-6 opacity-70 italic font-bold text-sm md:text-base">"Distance is just a variable we haven't hacked yet."</p>
                <div class="p-3 border border-white/10 bg-black/40 text-[10px] md:text-xs text-left font-mono">
                    <div id="terminal-out">> _</div>
                </div>
                <div class="mt-8 text-cyan-400 animate-bounce text-[10px] uppercase tracking-[0.2em]">Scroll to Begin Decryption</div>
            </div>
        </section>

        <section class="section-trigger" id="s2">
            <div class="card-retro hidden-node" id="node-grid">
                <h2 class="pink-glow mb-4">Structural Lag</h2>
                <p class="text-base md:text-lg">Between our time zones, space stretches like liquid neon.</p>
                <div class="mt-8 p-3 border-dashed border border-pink-500/30">
                    <span class="text-[9px] uppercase opacity-60">Interactive: Sweep mouse/finger over card</span>
                </div>
            </div>
        </section>

        <section class="section-trigger" id="s3">
            <div class="card-retro hidden-node" id="node-freq">
                <h2 class="cyan-glow mb-4">Signal Tuning</h2>
                <div id="freq-visualizer" class="h-16 flex items-center justify-center gap-1 mb-6">
                </div>
                <p id="freq-text" class="text-sm opacity-30">The frequency is currently scrambled.</p>
                <div class="mt-8 h-1.5 w-full bg-white/10 rounded-full relative">
                    <div id="freq-slider" class="absolute h-6 w-6 bg-cyan-400 -top-2 rounded-full cursor-pointer shadow-[0_0_15px_cyan]"></div>
                </div>
            </div>
        </section>

        <section class="section-trigger" id="s4">
            <div class="card-retro hidden-node" id="node-fragments">
                <h2 class="pink-glow mb-4">Packet Loss</h2>
                <p class="text-sm md:text-base">Every message I send is a piece of me scattered across the Atlantic.</p>
                <div id="packet-container" class="h-32 w-full relative mt-4 border border-white/5 bg-black/20 overflow-hidden">
                </div>
                <p class="text-[10px] mt-4 opacity-40 uppercase">Collect the falling data nodes</p>
            </div>
        </section>

        <section class="section-trigger" id="s5">
            <div class="card-retro hidden-node" id="node-power">
                <h2 class="cyan-glow mb-4">Core Overheat</h2>
                <p class="text-sm md:text-base">My hardware can't keep up with how much I miss you.</p>
                <div class="flex justify-center mt-6">
                    <div id="power-gauge" class="w-20 h-20 border-4 border-cyan-500 rounded-full flex items-center justify-center text-lg font-black">1%</div>
                </div>
                <p class="text-[10px] mt-6 opacity-40 italic">Move fast to generate energy</p>
            </div>
        </section>

        <section class="section-trigger" id="s6">
            <div class="card-retro hidden-node" id="node-final">
                <h2 class="glitch-text-anim mb-4">SYNC READY</h2>
                <p class="mb-8 text-sm md:text-base">All nodes established. The distance has been calculated. The gap is ready to be closed.</p>
                <div id="final-lock-btn" class="inline-block px-8 py-4 md:px-12 md:py-6 border-2 border-cyan-400 text-cyan-400 opacity-20 transition-all duration-500 font-black cursor-not-allowed text-sm md:text-base">
                    INITIALIZE FULL SYNC
                </div>
                <p id="lock-hint" class="text-[10px] mt-4 text-pink-500 font-bold">REACH 100% INTEGRITY TO UNLOCK</p>
            </div>
        </section>

        <div class="h-[20vh]"></div> 
    </main>

    <div id="final-overlay">
        <h1 class="cyan-glow glitch-text-anim mb-8 text-center">SYNCED</h1>
        <div class="letter-content">
            <p class="mb-4">To my <span class="pink-glow font-black recipient-name">Favorite Human</span>,</p>
            <p class="mb-4">The pixels on this screen are just lights. The code is just logic. But the feeling behind them is the only thing in this digital void that is truly real.</p>
            <p class="mb-4">9,999km is just a number in a database. Between us, there is no distance.</p>
            <p class="pink-glow font-black text-xl md:text-2xl mt-6">I AM HERE. WITH YOU üíó.</p>
        </div>
        <button onclick="location.reload()" class="mt-10 text-[10px] opacity-40 uppercase tracking-widest border-b border-white hover:opacity-100 transition-all">Re-Initialize Link</button>
    </div>

    <footer style="position: fixed; bottom: 0; left: 0; width: 100%; text-align: center; padding: 12px; z-index: 100000; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px); border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 12px; font-family: 'Space Mono', monospace;">
        Made with ‚ù§Ô∏è by 
        <a href="https://github.com/Mayborg121" target="_blank" rel="noopener" style="color: #00f3ff; text-decoration: none; text-shadow: 0 0 5px #00f3ff;">Mayborg</a>
    </footer>

    <script>
        /* --- STATE MANAGER --- */
        const STATE = {
            userName: "Special Person",
            syncPercent: 0,
            distance: 9999,
            freqLocked: false,
            fragmentsCollected: 0,
            powerLevel: 1,
            isSyncing: false
        };

        const urlParams = new URLSearchParams(window.location.search);
        STATE.userName = urlParams.get('n') || "Favorite Human";
        document.querySelectorAll('.recipient-name').forEach(el => el.innerText = STATE.userName);
        document.getElementById('target-id').innerText = `TARGET_ID: ${STATE.userName.toUpperCase()}`;

        /* --- INITIALIZE GSAP --- */
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

        function updateSync(amount) {
            STATE.syncPercent = Math.min(STATE.syncPercent + amount, 100);
            document.getElementById('sync-fill').style.width = STATE.syncPercent + '%';
            document.getElementById('sync-status').innerText = STATE.syncPercent < 100 ? `${Math.floor(STATE.syncPercent)}%` : "READY";
            
            if(STATE.syncPercent >= 100) {
                const btn = document.getElementById('final-lock-btn');
                btn.style.opacity = "1";
                btn.style.cursor = "pointer";
                btn.classList.remove('cursor-not-allowed');
                btn.classList.add('hover:bg-cyan-400', 'hover:text-black', 'shadow-[0_0_30px_cyan]');
                btn.onclick = triggerFinalSequence;
                document.getElementById('lock-hint').innerText = "CONNECTION ESTABLISHED";
                document.getElementById('lock-hint').classList.replace('text-pink-500', 'text-cyan-400');
            }
        }

        /* --- TERMINAL EFFECT --- */
        const terminal = document.getElementById('terminal-out');
        const lines = [
            `> SEARCHING_FOR_${STATE.userName.replace(/\s/g, '_').toUpperCase()}`,
            `> CONNECTION_FOUND_AT_PORT_0505`,
            `> DISTANCE_LOCKED: 9999.00KM`,
            `> INITIALIZING_SOUL_HANDSHAKE...`,
            `> STATUS: STANDBY`
        ];
        let lineIdx = 0;
        function typeLine() {
            if(lineIdx < lines.length) {
                const div = document.createElement('div');
                div.innerText = lines[lineIdx];
                terminal.appendChild(div);
                lineIdx++;
                setTimeout(typeLine, 800);
            }
        }
        typeLine();

        /* --- SCROLL ENGINE --- */
        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
            const progress = scrollY / maxScroll;
            
            STATE.distance = Math.max(0, Math.floor(9999 * (1 - progress)));
            document.getElementById('distance-display').innerText = `${STATE.distance}KM`;

            gsap.to("#floor-grid", {
                backgroundPosition: `0 ${scrollY * 0.8}px`,
                duration: 0.1
            });

            gsap.to(".synth-sun", {
                y: scrollY * 0.15,
                duration: 0.5
            });
        });

        /* --- SECTION REVEALS --- */
        document.querySelectorAll('.hidden-node').forEach((node) => {
            gsap.to(node, {
                scrollTrigger: {
                    trigger: node,
                    start: "top 85%",
                    onEnter: () => updateSync(2)
                },
                opacity: 1,
                y: 0,
                duration: 1.2,
                ease: "power2.out"
            });
        });

        /* --- INTERACTIVE: GRID WARP (S2) --- */
        const nodeGrid = document.getElementById('node-grid');
        const handleGridMotion = (e) => {
            const rect = nodeGrid.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            const x = (clientX - rect.left) / rect.width - 0.5;
            const y = (clientY - rect.top) / rect.height - 0.5;
            
            gsap.to("#floor-grid", {
                rotationY: x * 20,
                rotationX: 60 + (y * 5),
                duration: 0.5
            });
            updateSync(0.05);
        };
        nodeGrid.addEventListener('mousemove', handleGridMotion);
        nodeGrid.addEventListener('touchmove', handleGridMotion);

        /* --- INTERACTIVE: FREQUENCY (S3) --- */
        const freqVis = document.getElementById('freq-visualizer');
        const freqSlider = document.getElementById('freq-slider');
        const freqText = document.getElementById('freq-text');
        
        for(let i=0; i<15; i++) {
            const bar = document.createElement('div');
            bar.className = 'w-1 bg-cyan-400 opacity-20';
            bar.style.height = '10px';
            freqVis.appendChild(bar);
        }

        let isDragging = false;
        const startDrag = () => isDragging = true;
        const stopDrag = () => isDragging = false;

        freqSlider.addEventListener('mousedown', startDrag);
        window.addEventListener('mouseup', stopDrag);
        freqSlider.addEventListener('touchstart', startDrag);
        window.addEventListener('touchend', stopDrag);

        const handleFreqMove = (clientX) => {
            if(!isDragging) return;
            const rect = freqSlider.parentElement.getBoundingClientRect();
            let x = clientX - rect.left;
            x = Math.max(0, Math.min(x, rect.width));
            const percent = x / rect.width;
            freqSlider.style.left = `${x - 12}px`;
            
            document.querySelectorAll('#freq-visualizer div').forEach((bar, i) => {
                const h = Math.sin(percent * 10 + i) * 30 + 30;
                bar.style.height = h + 'px';
                bar.style.opacity = percent > 0.75 && percent < 0.85 ? '1' : '0.2';
            });

            if(percent > 0.78 && percent < 0.82 && !STATE.freqLocked) {
                STATE.freqLocked = true;
                freqText.innerText = "SIGNAL RECOVERED: 'I MISS YOU'";
                freqText.className = "pink-glow font-bold animate-pulse text-xs md:text-sm";
                updateSync(15);
            }
        };

        window.addEventListener('mousemove', (e) => handleFreqMove(e.clientX));
        window.addEventListener('touchmove', (e) => handleFreqMove(e.touches[0].clientX));

        /* --- INTERACTIVE: PACKETS (S4) --- */
        const packetCont = document.getElementById('packet-container');
        function spawnPacket() {
            if(STATE.fragmentsCollected >= 20 || STATE.isSyncing) return;
            const p = document.createElement('div');
            p.className = 'floating-node';
            p.style.left = Math.random() * 90 + '%';
            p.style.top = '-20px';
            p.style.width = '15px';
            p.style.height = '15px';
            packetCont.appendChild(p);

            gsap.to(p, {
                y: 150,
                duration: 3,
                ease: "none",
                onComplete: () => p.remove()
            });

            const collect = () => {
                p.remove();
                STATE.fragmentsCollected++;
                updateSync(2);
            };
            p.addEventListener('mouseover', collect);
            p.addEventListener('touchstart', collect);
        }
        setInterval(spawnPacket, 1500);

        /* --- INTERACTIVE: POWER (S5) --- */
        const gauge = document.getElementById('power-gauge');
        let lastPos = {x:0, y:0};
        const handlePower = (clientX, clientY) => {
            const dist = Math.hypot(clientX - lastPos.x, clientY - lastPos.y);
            if(dist > 30 && STATE.powerLevel < 100) {
                STATE.powerLevel += 0.4;
                gauge.innerText = Math.floor(STATE.powerLevel) + '%';
                gauge.style.color = `hsl(${STATE.powerLevel}, 100%, 50%)`;
                gauge.style.borderColor = `hsl(${STATE.powerLevel}, 100%, 50%)`;
                updateSync(0.1);
            }
            lastPos = {x: clientX, y: clientY};
        };
        window.addEventListener('mousemove', (e) => handlePower(e.clientX, e.clientY));
        window.addEventListener('touchmove', (e) => handlePower(e.touches[0].clientX, e.touches[0].clientY));

        /* --- FINAL SEQUENCE TRIGGER --- */
        function triggerFinalSequence() {
            STATE.isSyncing = true;
            document.body.style.overflow = 'hidden';
            window.scrollTo(0,0);
            
            const tl = gsap.timeline();
            tl.to("main, header", { opacity: 0, duration: 1.5 })
              .to(".synth-sun", { scale: 15, opacity: 0, duration: 2 }, "-=1")
              .set("#final-overlay", { display: "flex" })
              .to("#final-overlay", { opacity: 1, duration: 2 });
        }
    </script>
</body>

</html>
